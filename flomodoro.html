<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Flowmodoro</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

        :root {
            --case-color: #F0F0BE;
            --screen-bg: #2c3e50;
            --digit-color: #51ffad;
            --shadow: #A0522D;
        }

        body {
            background-color: transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
        }

        /* The Main Device Body */
        .device {
            background: var(--case-color);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 8px 8px 0px var(--shadow);
            width: 320px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: relative;
        }

        /* The Digital Screen */
        .screen {
            background: var(--screen-bg);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 4px inset #1a252f;
        }

        #status {
            color: #95a5a6;
            font-size: 0.7rem;
            letter-spacing: 2px;
            margin-bottom: 5px;
            font-weight: bold;
        }

        #timer-display {
            font-family: 'Share Tech Mono', monospace;
            font-size: 3.2rem;
            color: var(--digit-color);
            text-shadow: 0 0 10px rgba(81, 255, 173, 0.5);
        }

        /* Buttons & Controls */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .main-btn {
            background: #EAB29C;
            border: 2px solid #333;
            border-radius: 30px;
            padding: 12px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #C25B2C;
            transition: all 0.1s;
        }

        .main-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #ccc;
        }

        .secondary-controls {
            display: flex;
            justify-content: space-around;
        }

        .circle-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #333;
            background: #eecba8;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        /* Break Notification Card */
        #alert-card {
            position: absolute;
            bottom: -80px;
            left: 0;
            right: 0;
            background: #ffdbdb;
            color: #d63031;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            border: 2px solid #d63031;
            display: none;
            animation: slideUp 0.3s ease-out forwards;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>

    <div class="device">
        <div class="screen">
            <div id="status">READY TO FOCUS</div>
            <div id="timer-display">00:00:00</div>
        </div>

        <div class="controls">
            <button id="mainBtn" class="main-btn" onclick="toggleTimer()">START FOCUS</button>
            <div class="secondary-controls">
                <button class="circle-btn" onclick="resetTimer()">↺</button>
                <button class="circle-btn" style="background: #a8dfee;">ℹ</button>
            </div>
        </div>

        <div id="alert-card">Break over! Time to get back to it.</div>
    </div>

    <script>
        let startTime, elapsedTime = 0, timerInterval;
        let isWorking = false, isBreaking = false;

        const display = document.getElementById('timer-display');
        const statusText = document.getElementById('status');
        const mainBtn = document.getElementById('mainBtn');
        const alertCard = document.getElementById('alert-card');

        function timeToString(time) {
            let hh = Math.floor(time / 3600000);
            let mm = Math.floor((time % 3600000) / 60000);
            let ss = Math.floor((time % 60000) / 1000);
            return `${hh.toString().padStart(2, '0')}:${mm.toString().padStart(2, '0')}:${ss.toString().padStart(2, '0')}`;
        }

        function toggleTimer() {
            alertCard.style.display = "none";
            
            if (!isWorking && !isBreaking) {
                isWorking = true;
                statusText.innerText = "FOCUSING...";
                mainBtn.innerText = "STOP & REST";
                startTime = Date.now() - elapsedTime;
                timerInterval = setInterval(() => {
                    elapsedTime = Date.now() - startTime;
                    display.innerText = timeToString(elapsedTime);
                }, 1000);
            } else if (isWorking) {
                clearInterval(timerInterval);
                isWorking = false;
                isBreaking = true;
                elapsedTime = elapsedTime / 5; // Calculate 1/5th rest
                statusText.innerText = "ON BREAK";
                mainBtn.innerText = "SKIP BREAK";
                
                timerInterval = setInterval(() => {
                    elapsedTime -= 1000;
                    if (elapsedTime <= 0) {
                        clearInterval(timerInterval);
                        elapsedTime = 0;
                        isBreaking = false;
                        statusText.innerText = "FINISHED";
                        alertCard.style.display = "block";
                    }
                    display.innerText = timeToString(elapsedTime);
                }, 1000);
            } else if (isBreaking) {
                resetTimer();
                toggleTimer();
            }
        }

        function resetTimer() {
            clearInterval(timerInterval);
            elapsedTime = 0;
            isWorking = false;
            isBreaking = false;
            display.innerText = "00:00:00";
            statusText.innerText = "READY TO FOCUS";
            mainBtn.innerText = "START FOCUS";
            alertCard.style.display = "none";
        }
    </script>
</body>
</html>